---
description: 測試要求和品質標準
---

# 測試規範

## 測試要求

- **測試必須涵蓋正在實作的功能**
- **絕不要忽略系統或測試的輸出** - 日誌和訊息通常包含重要資訊
- **測試輸出必須完美無缺才能通過**
- 如果日誌應該包含錯誤，必須捕獲並測試它

## 無例外政策

**每個專案都必須有完整的測試覆蓋**：

- ✅ Unit Tests（單元測試）
- ✅ Integration Tests（整合測試）
- ✅ End-to-End Tests（端對端測試）

❌ **絕不將任何測試類型標記為「不適用」**

如果認為某種測試類型不適用，需要人類明確說出：**「我授權你這次跳過寫測試」**

## 測試執行流程

每撰寫／修改任何程式碼後**務必**依序執行：

```bash
# 1. 單元 / 整合測試
pnpm test

# 2. 端對端測試
pnpm test:e2e
```

### 失敗處理流程

若有測試失敗：

1. 先修正程式或測試
2. 再重跑兩條指令
3. 重複直到**全綠**

## 測試配置檔案

相關配置檔案：

- Vitest 配置：[vitest.config.ts](mdc:vitest.config.ts)
- Playwright 配置：[playwright.config.ts](mdc:playwright.config.ts)
- 測試覆蓋率報告：[coverage/](mdc:coverage/)

## 測試輸出品質

- 測試輸出必須**完美無缺**才能通過
- 關注所有警告和錯誤訊息
- 日誌訊息是重要的除錯資訊來源
