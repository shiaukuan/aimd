---
globs: *.test.ts,*.test.tsx,*.spec.ts,*.spec.tsx
description: 測試要求和品質標準
---

# 測試要求和品質標準

## 測試覆蓋要求

- **測試必須涵蓋正在實作的功能**
- **無例外政策**：在任何情況下你都不應該將任何測試類型標記為「不適用」
- **完整測試類型**：每個專案都必須有 unit tests、integration tests 和 end-to-end tests

## 測試品質標準

- **絕不要忽略系統或測試的輸出** - 日誌和訊息通常包含重要資訊
- **測試輸出必須完美無缺才能通過**
- **如果日誌應該包含錯誤，捕獲並測試它**

## 測試執行流程

每撰寫／修改任何程式碼後**務必**依序執行：

1. `pnpm test` # 單元 / 整合測試
2. `pnpm test:e2e` # 端對端測試

若有測試失敗，先修正程式或測試 → 再重跑兩條指令，直到 **全綠**。

## 特殊授權

如果你認為某種測試類型不適用，你需要人類明確說出「我授權你這次跳過寫測試」
